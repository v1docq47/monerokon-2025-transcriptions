# Люк Шрамовский

_**Делители FCMP - немного инсайда**_

_Люк Шрамовский из Cypher Stack рассказывает о тех трудностях, с которыми пришлось столкнуться исследователям при работе над делителями._

_Люк является математиком-исследователем, имеет степень бакалавра математики и две степени магистра: одну по математике со специализацией в теории чисел, а другую - по теории кодирования. В свободное время Люк работает над решением множества различных математических задач, в основном связанных с гипотезами теории чисел, и играет в различные игры._

[https://youtu.be/6kQYqaKgupQ](https://youtu.be/6kQYqaKgupQ)

---

_**Люк Шрамовский:**_ Я приветствую сообщество Monero! Меня зовут Люк Шрамовский, и я являюсь одним из криптографов, входящих в исследовательскую группу Cypher Stack. Я вместе с другими членами данной группы непосредственно занимался исследованием делителей в связи с доказательствами FCMP. И сегодня я расскажу о тех трудностях, с которыми мы столкнулись в ходе своих исследований, и обозначу некоторые из наиболее серьёзных проблем. Я начну с менее сложной с точки зрения математики части, расскажу о некоторых трудностях, а затем, постепенно перейду к более сложным математическим аспектам, с которыми мы в итоге столкнулись. Спасибо за возможность поделиться с вами этой информацией. Надеюсь, моя презентация будет информативной, и если у вас возникнут вопросы, пожалуйста, задавайте без колебаний. И без дальнейших предисловий перейдём к обсуждению тех проблем, с которыми мы столкнулись.

Итак, начнём с менее сложной с точки зрения математики части проблем, связанных с делителями. "Менее сложная" не означает отсутствие какой-либо математики в принципе. Просто это будет обзор общего характера, не касающийся каких-то конкретных математических сложностей, с которыми мы столкнулись. И, пожалуй, первое, что само по себе не является затруднением, но, скорее, потребовало осторожности от членов исследовательской группы - идея делителей и их применения в доказательствах FCMP предельно интуитивна. А когда что-то кажется интуитивно понятным, всегда полезно остановиться и убедиться, что интуитивный подход соответствует реальности. В математике существует множество примеров, когда что-то, что казалось истинным, ощущалось как истина, в итоге оказывалось ложным. Подобное действительно случается, хоть и редко. Поэтому всегда полезно, особенно тем, кто заботится о безопасности и приватности, быть предельно осторожным в подобных случаях, а в нашем случае также потому, что идея, лежащая в основе делителей, базируется на понятиях, которые не так уж и чужды людям, не обладающим богатым математическим опытом. Эти идеи, пожалуй, можно вывести с помощью обычных исчислений,  которые вы, возможно, использовали в старших классах или на курсах матанализа в университете. Но эти идеи не являются чем-то сверхновым. Это очень продуманный вариант реализации того, что существовало ранее.

Но это тот самый момент, где у нас возникли первые небольшие затруднения, потому что производные многих равенств и уравнений, которые изначально появлялись при работе с делителями, на первый взгляд казались правильными, но нам следовало соблюдать некоторую осторожность, поскольку мы имели дело не с обычными исчислениями. В случае с обычными исчислениями, как мы их обычно себе представляем, мы имеем дело с действительными числами, с непрерывными функциями, хорошими дифференциальными функциями, с тем, что мы довольно хорошо понимаем интуитивно. И тут следует быть очень и очень осторожными, поскольку мы имеем дело уже не с обычным исчислениями, но с чем-то, что работает подобно исчислениям, используемым применительно к странно ведущим себя алгебраическими объектам.

Итак, интуиция подсказывает нам: "Ладно, пожалуй, в этом что-то есть. По крайней мере, что-то стоящее". Но достаточно ли одной только интуиции, чтобы сказать: "Отлично, тут всё в порядке, можно идти дальше"? Мы решили, что нет, потому что делители - это не какая-то новая идея. Они существуют уже десятилетия, может быть, даже больше века - с ними имели дело, их изучали, изучали производные со времён Исаака Ньютона. Но сходство между обычными исчислениями и исчислениями в случае с делителями - вот где следует быть особо осторожными, ведь мы рассматриваем не производные в классическом понимании действительных чисел и непрерывных функций. Мы говорим о производных, связанных с алгебраическими объектами. Мы говорим о так называемых деривациях.

Итак, если вы когда-либо сталкивались с матанализом, то вы, несомненно, сталкивались с правилом произведения, которое выглядит, ка показано здесь. Итак, у нас есть произведение двух функций, f(x) и g(x). Мы берём производную, и производная их произведения должна быть равна производной первой функции, умноженной на вторую. Затем мы прибавляем её к первой функции, умноженной на производную второй функции. И это очень полезное свойство, поскольку оно позволяет нам разделить всё это на части и вычислять более простые производные.

Это настолько полезное свойство, что мы можем определить нечто, называемое производной, которая представляет собой гомоморфизм между двумя алгебраическими объектами и соответствует свойству, называемому свойством Лейбница. Это позволяет нам определить нечто, аналогичное производной обычного исчисления. И это, конечно же, хорошо. Но мы должны быть осторожны, поскольку, так как мы определяем производную согласно правилу, которое я привёл секунду назад. И мы применяем это правило, не хочу сказать искусственно, но мы применяем его, потому что это удобно, потому что ожидаем, что многие из тех свойств, что позволили нам использовать это правило в случае с классическим исчислением, будут индуцировать те же свойства в более сложной структуре.

Итак, я говорю о том, что правило произведения, которое мы имеем в случае с обычными исчислениями, возникает, потому что мы приводим ряд аргументов с пределами и непрерывными функциями и говорим: "Всё это следует из классического определения, и поэтому мы используем данное правило произведения". Но всякий раз, когда мы переносим эту идею в алгебраическую среду, ситуация становится несколько иной.

Мы говорим, что хотим обеспечить соблюдение этого правила, верно? Так что это совсем не обязательно будет чем-то, что возникает естественным образом, так же, как и исходная производная в исчислении. Вот почему нам следует проявлять некоторую осторожность, ведь, как и правило произведения, целый ряд других правил обычного исчисления вытекает из очень похожих аргументов. Но у нас нет никакой гарантии, что эти же аргументы будут действительны в новом пространстве, в новой стране алгебраических чудес, в которой мы оказываемся. Именно здесь нам пришлось проявить осторожность, к чему я призываю и всех остальных. Мы просто не можем использовать все правила, знакомые нам по обычным исчислениям. Мы можем использовать только те, которые вытекают из определения правила произведения, которое у нас было раньше. Мы не можем использовать упрощения, если не знаем наверняка, работают ли они или нет в новых условиях, поскольку они могут и не работать. И это была первая часть.

Вторая часть связана с причиной, по которой мы вообще говорим о производных. И эта причина заключается в том, что идея делителей полностью основана на двух других идеях. Первая - это сами делители. Вторая - так называемая логарифмическая производная. Это будет выглядеть вот так. У нас есть функция f(x), и мы определяем её как производную функции, делённую на исходную функцию. Довольно просто, не так ли? Но это определение удобно, поскольку оно применимо в любом месте, где можно определить производную. Верно? Если у нас есть исходный объект, мы берём его производную и производим деление, и всё должно быть в порядке. И именно поэтому нужно быть очень осторожными, когда мы говорим о производных в целом, потому что это невероятно важно.

Итак, учитывая всё вышесказанное, первой серьёзной проблемой стали исчисления, потому что если действовать классическим способом, то всё будет сильно отличаться от того, как это делается в алгебраической среде. И, как оказалось, эти два понятия непереносимы. Нельзя просто сказать: "Мы вывели этот аргумент, используя классическое исчисление, следовательно, он, вероятно, подойдёт и в этом случае". Поэтому нашему ведущему исследователю, Брэндону Гуделлу, пришлось проделать значительную работу, поскольку ему пришлось брать ту же систему уравнений, которая изначально была выведена с помощью обычного исчисления, и так же выводить аргументы, но делать это максимально аккуратно.

И тут начинается самое интересное. Если вы хотите произвести выведение правильно, вы смотрите не на обычное исчисление, а на гораздо более многомерное вычисление. Как выяснилось, можно дойти до восьмой степени, до восьмимерного исчисления, что значительно сложнее. Но это было необходимо, поскольку всякий раз, когда мы работаем с алгебраическими объектами и применяем что-то, что уже хорошо работает в случае, например, действительных чисел, крайне редко случается так, что это же решение будет работать так же хорошо в других случаях. И чтобы сделать вычисления более строгими, чтобы убедиться, что все они будут работать, как надо, пришлось добавить деталей. И это потребовало использования восьмимерного исчисления, что было скверно с точки зрения выведения, поскольку это означало, что мы потратим уйму времени, что придётся иметь дело с кучей самых разных вещей, множеством разных объектов, которые придётся тщательно отслеживать. Но, сделав это, Брэндон смог в итоге повторно вывести правильную, рабочую систему уравнений.

И это было большой проблемой. Первоначальная деривация, производимая с помощью обычного исчисления, выглядела, как рабочая, поскольку интуиция говорила, что так оно и есть. Однако для правильного выведения потребовалось гораздо больше усилий, поскольку нельзя было обращаться с объектами, как с непрерывными функциями. Так нельзя. Это небезопасно, поскольку непрерывные функции ведут себя вполне корректно. А мы говорим о группах эллиптических кривых. Мы говорим о хешировании точек для размещения на эллиптической кривой и о дальнейших операциях с их использованием. Это очень сложно и очень странно - думаю, самое подходящее для этого слово. Итак, это стало первым осложнением. И, думаю, на этом я и остановлюсь.

Итак, чтобы более не тратить время, зафиксируем: вычислительная часть стала источником больших затруднений. Второе, на что мы потратили значительное количество времени и сил, - обеспечение строгости в математическом смысле этого слова. Хорошая теория работает только тогда, когда расставлены все точки над i, а всё, что, как мы утверждаем, должно работать, имеет веские доказательства, подтверждающие этот факт. Поскольку это было новое применение относительно старого математического понятия, мост между ними не был определён достаточно точно, за исключением того факта, что понятие будет применяться к доказательствам FCMP.

Поэтому очень важно убедиться в том, что всё то, что мы хотим сделать, будет работать. И многое при этом сводится к поиску результатов в старых учебниках и двойной, тройной проверке ссылок, позволяющей убедиться, что всё, что мы принимаем как должное, действительно верно. И это обязательно нужно делать, независимо от типа проводимого исследования. По крайней мере, это было важно для нашей исследовательской группы, поскольку все мы в той или иной степени стремимся к завершённости. Мы хотим, чтобы идея стала формальной. Чтобы по мере проведения исследований в будущем между старой теорией и её применением появился надёжный мост. И мы хотим знать, что всё это хорошо не только будет отлично работать в случае с FCMP, но и что в будущем, если будут найдены новые способы применения делителей, теория будет достаточно проверена и хороша, чтобы на неё можно было обратить внимание, а также чтобы она подкреплялась вполне чётким примером использования в случае FCMP.

Таким образом, затруднения также были связаны с тем, что мы пытались сделать что-то, что ещё не существовало. Отдельные части существовали в различных формах, иногда описанных в учебниках, иногда  - в математических работах. Но собрать всё воедино и показать, что все эти части работают вместе, каким-то законченным и лаконичным образом, стало вторым осложнением.

Математические вычисления должны производиться аналогично, скажем, построению пирамиды. По мере того, как мы становимся точнее в определениях и получаем всё больше результатов, становится крайне важно, чтобы фундамент был надёжным. Это значительно упрощает процесс выработки доказательств безопасности и рассмотрение нестандартных случаев, которые могут вызвать ряд проблем, поскольку объекты будут не только хорошо изучены, но и все инструменты для взаимодействия с ними будут находиться в одном месте.

И на этом я завершаю эту простую, не слишком насыщенную математикой часть, и далее мы поговорим о более серьёзной работе. По крайней мере, мы поговорим о теории, лежащей в основе того, как всё работает, и о том, где конкретно что-то пошло не так. И если вы не такой фанатичный математик, как я, я не обижусь, если вы пропустите следующую часть, сколько бы времени она ни занимала. Но я постараюсь сделать её максимально доступной. Итак, переходим к серьёзной математической части.

Эта более сложная математическая часть будет непосредственно связана с делителями. И лучше всего начать с небольшого введения в тему эллиптических кривых. Это позволит понять, что будет происходить далее.

Итак, возможно, вы уже знакомы с эллиптическими кривыми, а может, и нет, но в качестве небольшого введения или для освежения знаний, я привожу эту забавную линию. Это и есть эллиптическая кривая. Она определяется как y2 + x3 + αx + β, где альфа и бета - действительные числа. Эллиптические кривые особенны, потому что для них определён особый тип сложения, который, что неудивительно и как-то даже не креативно, называется просто сложением на эллиптических кривых. Мы выбираем две точки на кривой - в данном случае мы выбрали P и Q - и можем сложить их, нарисовав прямую, проходящую через обе эти точки, и эта прямая пересечёт другую точку эллиптической кривой. В данном случае этой точкой будет R. Затем мы берём точку и вращаем её вокруг оси x. Это и является  сложением на эллиптической кривой. И в случае с любым сложением, как и всем прочим, что мы делаем, нужно быть очень осторожными, потому что во многих случаях это будет сложением на эллиптической кривой, которое разительно отличается от обычного сложения.

Итак, предположим, мы выбрали точки P и Q. Каждая из них является точкой эллиптической кривой, поэтому у них есть координаты x и y. Мы просто обозначаем их индексами. Мы можем определить λ и μ следующим образом: λ как yP минус yQ, поделённое на xP минус xQ, а μ как yP минус λ, умноженное на xP.

Надеюсь, это вам знакомо, даже если вы раньше не видели эллиптических кривых, потому что λ очень похожа на нисходящую кривую, а μ - на точку пересечения, и это действительно так. Мы проводим линию между точками P и Q, и это позволяет нам вывести систему уравнений. Данная система уравнений в конечном итоге будет весьма полезна. Но прежде всего она позволит нам определить так называемую интерполяционную прямую для точек P и Q, а также R. Таким образом, для каждой из точек P, Q и R в этом наборе координата y точки равна λ, а координата x равна μ. Это по-настоящему хорошая параметризация для этих точек.

Это также позволяет нам вывести систему уравнений, которые должны быть удовлетворены, чтобы сумма P + Q в итоге была равна тому, чему должна быть равна на эллиптической кривой, то есть, точно так, как это показано здесь. Итак, у нас есть λ и μ, которые нужно определить так же, как мы это делали ранее. И у нас есть уравнение прямой. Из третьего уравнения следует, что если взять любую из этих точек, как и раньше, координата y будет равна значению в правой части. Но при этом также следует помнить о том, что каждая из этих точек лежит на эллиптической кривой, а эллиптическая кривая определяется как y2 + x3 + αx + β. И это условие должно выполняться во всех случаях.

Теперь, всякий раз, когда мы будем производить какую-либо вычислительную операцию на эллиптической кривой или где-либо на алгебраической кривой в целом, будет необходимо соблюдать осторожность при выполнении вычислений и применении методов, позволяющих производить эти вычисления в целом.

Теперь небольшой тизер к следующей части: у нас есть вот такая формула - формула Кардано. Это относительно старая формула, которая использовалась для решения некоторых кубических уравнений, в данном случае уравнения x2 + px + q = 0. И она хороша тем, что очень похожа на формулу для нашей эллиптической кривой. Это, по сути, позволяет нам находить корни. Выражение немного запутанное, но при наличии определённых параметров позволяет нам находить недостающие параметры. И это будет ключом к тому, что будет происходить дальше, о чём мы сейчас и поговорим.

Итак, предыдущая информация была необходима для понимания того, что объект, над которым выполняются операции, имеет множество ограничений. Как мы уже видели на примере этой системы уравнений, чтобы всё работало, имеется множество ограничений, которые необходимо соблюсти. Но также есть кое-что ещё, что обеспечивает работу всей системы. Видите ли, каждая из этих величин должна быть рациональной функцией, чтобы всё работало так, как нам хотелось бы, при использовании некоторых из имеющихся у нас проверочных уравнений, которые появляются в делителях, связанных с доказательствами FCMP. Теперь оказывается, что, при известных λ и μ мы могли бы сделать их более или менее свободными переменными, а затем использовать формулу Кардано для их вычисления, что изначально и делалось при выведения системы.

Именно здесь мы сталкиваемся с первым препятствием, которое заключается в том, что мы не можем гарантировать, что μ или λ окажутся рациональными функциями. И это проблема, поскольку без рациональных функций у нас возникнут неприятности. Многие вычисления основаны именно на них, поскольку мы будем говорить об элементах в функциональном поле, что позволит далее говорить о делителях. Поэтому, если мы упустим этот момент, то мы немного упустим и в части, связанной непосредственно с делителями.

Ранее, в нематематической части, когда я упоминал более многомерные исчисления, я говорил именно об этом, потому что исходная деривация требовала учитывать λ и μ, что потенциально не даёт нам рациональных функций. Теперь же нам приходится учитывать всё остальное и как бы игнорировать λ и μ, чтобы получить именно рациональные функции. И это достигается с помощью очень длинной деривации, которая столь любезна была проверена  Брэндоном что называется от и до. Но это наглядно демонстрирует, что именно эта сразу и незаметная проблема и является одной из тех проблем, из-за которых нам пришлось полностью повторно выводить то, что требовалось. Было бы очень здорово, если бы λ и μ всегда оказывались рациональными функциями, но, как выяснилось, если мы используем формулу Кардано для их нахождения, то в большинстве случаев это не так, что является огромной проблемой. Поэтому от такой деривации пришлось отказаться, за исключением случаев, когда λ и μ являются рациональными функциями. Но это случается редко, а нам нужно нечто, охватывающее все случаи. И это был один из тех моментов, которые требовали переработки.

Теперь перейдём к исправленной части. Поскольку уравнения, приведённые ранее, решались с помощью λ и μ, и в итоге это создавало вероятность отсутствия рациональных функций, необходимых для работы с делителями, было необходимо придумать новый способ повторного выведения этих уравнений.

Итак, мы начинаем с выбора точек P и Q, а затем немного внимательней определяем ту дополнительную информацию, которая понадобится нам для точного определения λ и μ, а также третьей точки R.

Итак, чтобы сделать это, нам нужно определить ту информацию, которая гарантирует, что всё пройдёт гладко. В конечном итоге, нам понадобятся наши координаты по оси x для каждой из выбранных точек, то есть xP, xQ и xR, а затем неизвестные λ и μ. Далее нам нужны значения по оси y, но поскольку эти значения y попадают на кривую, мы можем немного сократить этот процесс. Мы можем представить пару xy просто как x и бит, 0 или 1. Мы можем это сделать, поскольку у нас есть это хорошее уравнение для эллиптической кривой. И эта эллиптическая кривая будет однозначно определена вплоть до выбранного нами значения x, а затем до того значения y, до которого она доходит, поскольку из предыдущего рисунка видно, что значения y зеркально отражаются относительно оси x, и нам просто нужно определить, к какой части относится x - к положительной или отрицательной.

Таким образом, мы переопределяем систему уравнений, гарантирующую, что λ и μ будут рациональными функциями. То есть, мы исключаем вероятность того, что μ и λ не будут рациональными функциями, но привносим небольшую вероятность того, что решений не будет, поскольку система линейных уравнений будет переопределённой. Но это тоже хорошая новость, поскольку такое может произойти с чрезвычайно малой вероятностью. Кроме того, это позволяет нам правильно вывести проверочные уравнения, потому что теперь исчисление выполняется правильно и с гарантией того, что всё будет работать, как рациональная функция, что в конечном счёте и требуется в случае с делителями.

Я понимаю, что, возможно, не рассмотрел делители не настолько глубоко, как хотелось бы некоторым. Но я мог бы часами сидеть здесь и рассказывать о них, потому что существует множество взаимосвязанных аспектов. Но исчисления представляли собой наибольшую сложность, они стали одной из самых серьёзных ловушек, в которую мы попали. Есть и другие, с которыми ещё предстоит разобраться. Но, думаю, все вы уже устали от моего голоса, поэтому, пожалуй, на этом я и закончу. А если вы захотите получить более подробную информацию, вы сможете найти её в соответствующей документации, как только команда Cypher Stack опубликует результаты нашей работы. Было бы даже здорово, если бы вы с ними ознакомились и оставили свои отзывы. Залог успешной математики - внимательное изучение результатов.

И я хочу поблагодарить всех вас за внимание. Хочу поблагодарить исследователей из моей команды: Брэндона Гуделла, Фримена Слотера и Риго Салазара, а также Диего Салазара, человека, благодаря которому всё это стало возможным. Вам ещё раз спасибо за внимание. А если у вас есть вопросы, свяжитесь с нами. Надеюсь, моя презентация пролила свет на некоторые вопросы, и если вам будет интересно узнать подробности, дайте знать.

Ещё раз спасибо всем! Хорошего вам дня… или ночи, смотря, что у вас там.